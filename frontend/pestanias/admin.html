<!doctype html>
<html lang="es">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>ECOPHOS — Admin</title>
  <link rel="stylesheet" href="../css/style.css"/>
  <link rel="stylesheet" href="../css/styleAdmin.css"/>
  <link rel="stylesheet" href="../css/styleLogin.css"/>
</head>
<body>
<header class="topbar">
  <div class="brand">ECOPHOS</div>
  <nav class="nav">
    <a href="../index.html" class="nav-link">Inicio</a>
    <a href="./nosotros.html" class="nav-link">Nosotros</a>
    <a href="./proyectos.html" class="nav-link">Proyectos</a>
    <a href="./servicios.html" class="nav-link">Servicios</a>
    <a href="./noticias.html" class="nav-link">Noticias</a>
    <a href="./contacto.html" class="nav-link">Contacto</a>
    <a href="./perfil.html" class="nav-link">Mi perfil</a>
  </nav>
</header>

<section class="page-head page-head--blue">
  <div class="page-head__inner">
    <h1>Panel de administración</h1>
    <p class="lead">Gestiona usuarios, buffer de contactos y noticias.</p>
  </div>
</section>

<main class="container">
  <!-- Login admin -->
  <section id="adminLoginBox" class="auth-card" style="max-width:560px; margin: 24px auto;">
    <h3>Iniciar sesión (Admin)</h3>
    <form id="adminLoginForm" class="auth-form show">
      <label>Usuario o correo
        <input type="text" name="username" required placeholder="admin o admin@ecophos.local">
      </label>
      <label>Contraseña
        <input type="password" name="password" required placeholder="••••••">
      </label>
      <button class="cta" type="submit">Entrar</button>
      <p id="adminLoginMsg" class="form-msg"></p>
    </form>
  </section>

  <!-- Panel admin -->
  <section id="adminPanel" style="display:none;">

    <!-- Barra de acciones -->
    <div style="display:flex; align-items:center; justify-content:space-between; gap:12px; margin: 10px 0 18px;">
      <h2 id="tableTitle" style="margin:0;">Usuarios</h2>
      <div style="display:flex; gap:8px;">
        <button id="reloadBtn" class="btn-outline is-active">Usuarios</button>
        <button id="bufferBtn" class="btn-outline">Buffer</button>
        <button id="newsBtn"   class="btn-outline">Administrar noticias</button>
        <button id="adminLogoutBtn" class="btn-outline">Cerrar sesión</button>
      </div>
    </div>

    <!-- ===== Registrar usuario (visible cuando la vista es 'Usuarios') ===== -->
     <section id="userFormWrap" class="about-card" style="margin-bottom:16px;">
  <h3 style="margin:0 0 10px;">Registrar nuevo usuario</h3>
  <form id="userCreateForm" class="auth-form show">
    <div style="display:grid; grid-template-columns: 1fr 1fr; gap:12px;">
      <label>Nombre completo
        <input type="text" name="name" required>
      </label>
      <label>Correo electrónico
        <input type="email" name="email" required>
      </label>
      <label>Teléfono (opcional)
        <input type="tel" name="phone">
      </label>
      <label>Contraseña
        <input type="password" name="password" minlength="6" required>
      </label>
    </div>
    <button type="submit" class="cta" style="margin-top:10px;">Crear usuario</button>
    <p id="userCreateMsg" class="muted"></p>
  </form>
</section>


    <!-- Formulario crear noticia (solo vista 'news') -->
    <div id="newsFormWrap" class="about-card" style="display:none; margin-bottom:16px;">
      <h3 style="margin:0 0 10px;">Nueva noticia</h3>
      <form id="newsForm" class="news-form" enctype="multipart/form-data">
        <div class="news-form__grid">
          <label class="field">
            <span class="field__label">Título</span>
            <input type="text" name="title" required>
          </label>
          <label class="field">
            <span class="field__label">Fecha publicada</span>
            <input type="date" name="datePublished" required>
          </label>
          <label class="field field--full">
            <span class="field__label">Descripción</span>
            <textarea name="description" rows="4" required></textarea>
          </label>
          <label class="field field--half">
            <span class="field__label">Imagen (JPG/PNG)</span>
            <input type="file" name="image" accept="image/*" required>
          </label>
          <div class="news-form__actions field--half">
            <button type="submit" class="cta">Publicar</button>
            <p id="newsFormMsg" class="muted"></p>
          </div>
        </div>
      </form>
    </div>

    <!-- Tabla dinámica -->
    <div class="about-card">
      <table style="width:100%; border-collapse: collapse;">
        <thead id="adminThead"></thead>
        <tbody id="adminTbody"></tbody>
      </table>
      <p id="adminMsg" class="muted"></p>
    </div>
  </section>
</main>

<script src="../js/admin.js"></script>
<script src="../js/perfil.js"></script>
"
</body>
</html>
